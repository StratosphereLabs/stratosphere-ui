import{r as s}from"./index-DRjF_FHU.js";import{h as E,T as p}from"./focus-management-D-lBgQCa.js";import{s as m}from"./use-is-mounted-BwivAQE6.js";function d(o,f,n){let i=m(f);s.useEffect(()=>{function u(c){i.current(c)}return document.addEventListener(o,u,n),()=>document.removeEventListener(o,u,n)},[o,n])}function w(o,f,n){let i=m(f);s.useEffect(()=>{function u(c){i.current(c)}return window.addEventListener(o,u,n),()=>window.removeEventListener(o,u,n)},[o,n])}function P(o,f,n=!0){let i=s.useRef(!1);s.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function u(t,l){if(!i.current||t.defaultPrevented)return;let e=l(t);if(e===null||!e.getRootNode().contains(e)||!e.isConnected)return;let v=function a(r){return typeof r=="function"?a(r()):Array.isArray(r)||r instanceof Set?r:[r]}(o);for(let a of v){if(a===null)continue;let r=a instanceof HTMLElement?a:a.current;if(r!=null&&r.contains(e)||t.composed&&t.composedPath().includes(r))return}return!E(e,p.Loose)&&e.tabIndex!==-1&&t.preventDefault(),f(t,e)}let c=s.useRef(null);d("pointerdown",t=>{var l,e;i.current&&(c.current=((e=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:e[0])||t.target)},!0),d("mousedown",t=>{var l,e;i.current&&(c.current=((e=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:e[0])||t.target)},!0),d("click",t=>{c.current&&(u(t,()=>c.current),c.current=null)},!0),d("touchend",t=>u(t,()=>t.target instanceof HTMLElement?t.target:null),!0),w("blur",t=>u(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{P as h,w as s};
