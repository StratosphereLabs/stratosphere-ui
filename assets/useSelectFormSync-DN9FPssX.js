import{r as f}from"./index-DRjF_FHU.js";import{s as x,l as D}from"./use-is-mounted-BwivAQE6.js";import{l as h}from"./lodash-CaEHFKMH.js";import{c as y}from"./FormLabelText-2tTELyhz.js";function q(s,t){let[r,u]=f.useState(s),a=x(s);return D(()=>u(a.current),[a,u,...t]),r}const g=(s,t)=>{const[r,u]=f.useState(s);f.useEffect(()=>{h.isEqual(r,s)||u(s)},[r,s]),f.useEffect(t,[r])},w=(s,t)=>s.id===t.id,B=s=>h.groupBy(s,({id:t})=>t),G=({multi:s,name:t,onItemSelect:r,options:u,selectedItems:a,setSelectedItems:n,valueMode:e})=>{const{watch:C,setValue:p}=y(),[E,V]=f.useState(!1),i=C(t),d={shouldTouch:!0,shouldDirty:!0},c=a[0]??null,l=f.useCallback(o=>o&&u[o]?[u[o][0]]:[],[u]);g(i,()=>{n(e==="id"?s===!0?(i??[]).flatMap(l):l(i??void 0):s===!0?i??[]:i?[i]:[]),V(!0)}),g(a,()=>{if(E){if(e==="id"){const o=s===!0?a.map(({id:m})=>m):(c==null?void 0:c.id)??"";p(t,o,d)}else p(t,s===!0?a:c,d);r==null||r(a)}})};export{w as d,B as g,q as i,G as u};
