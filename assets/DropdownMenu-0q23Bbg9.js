import{j as M}from"./jsx-runtime-DR9Q75dM.js";import{c as Q}from"./index-lhGYx47h.js";import{r as c,R as U}from"./index-DRjF_FHU.js";import{B as H}from"./Button-C8Er2sLW.js";import{a as J,M as W}from"./MenuItem-Hg2aCcF3.js";import{S as B,D as E,y as $,a as I,u as K,X as k,I as O,l as A,b as d,o as N}from"./use-is-mounted-BwivAQE6.js";import{p as z,r as X}from"./bugs-BqEXq7dn.js";import{u as Z,a as g,x as Y}from"./use-tracked-pointer-icV3TFbN.js";import{h as ee,T as te,_ as re,M as q,D as V,I as ae}from"./focus-management-D-lBgQCa.js";import{h as ne}from"./use-outside-click-ryvoS0Jt.js";import{F as oe}from"./use-tree-walker-BP3EYLpg.js";import{c as se,d as w,C as ie}from"./open-closed-DSFNRtpz.js";import{s as ue}from"./use-resolve-button-type-hEnF6IRh.js";import{n as le}from"./use-owner-DSsMAH39.js";import{b as me}from"./use-text-value-B3-EWJXX.js";import{t as ce}from"./transition-CuZKXbF5.js";var de=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(de||{}),pe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(pe||{}),fe=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(fe||{});function _(e,i=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=ae(i(e.items.slice()),u=>u.dataRef.current.domRef.current),n=o?a.indexOf(o):null;return n===-1&&(n=null),{items:a,activeItemIndex:n}}let ve={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,i)=>{var o;let a=_(e),n=Y(i,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:n,activationTrigger:(o=i.trigger)!=null?o:1}},3:(e,i)=>{let o=e.searchQuery!==""?0:1,a=e.searchQuery+i.value.toLowerCase(),n=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(s=>{var t;return((t=s.dataRef.current.textValue)==null?void 0:t.startsWith(a))&&!s.dataRef.current.disabled}),u=n?e.items.indexOf(n):-1;return u===-1||u===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:u,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,i)=>{let o=_(e,a=>[...a,{id:i.id,dataRef:i.dataRef}]);return{...e,...o}},6:(e,i)=>{let o=_(e,a=>{let n=a.findIndex(u=>u.id===i.id);return n!==-1&&a.splice(n,1),a});return{...e,...o,activationTrigger:1}}},j=c.createContext(null);j.displayName="MenuContext";function F(e){let i=c.useContext(j);if(i===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,F),o}return i}function Ie(e,i){return K(i.type,ve,e,i)}let ye=c.Fragment;function ge(e,i){let{__demoMode:o=!1,...a}=e,n=c.useReducer(Ie,{__demoMode:o,menuState:o?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:u,itemsRef:s,buttonRef:t},l]=n,p=$(i);ne([t,s],(x,h)=>{var m;l({type:1}),ee(h,te.Loose)||(x.preventDefault(),(m=t.current)==null||m.focus())},u===0);let v=I(()=>{l({type:1})}),b=c.useMemo(()=>({open:u===0,close:v}),[u,v]),y={ref:p};return U.createElement(j.Provider,{value:n},U.createElement(se,{value:K(u,{0:w.Open,1:w.Closed})},k({ourProps:y,theirProps:a,slot:b,defaultTag:ye,name:"Menu"})))}let be="button";function xe(e,i){var o;let a=O(),{id:n=`headlessui-menu-button-${a}`,...u}=e,[s,t]=F("Menu.Button"),l=$(s.buttonRef,i),p=z(),v=I(m=>{switch(m.key){case d.Space:case d.Enter:case d.ArrowDown:m.preventDefault(),m.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:g.First}));break;case d.ArrowUp:m.preventDefault(),m.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:g.Last}));break}}),b=I(m=>{switch(m.key){case d.Space:m.preventDefault();break}}),y=I(m=>{if(X(m.currentTarget))return m.preventDefault();e.disabled||(s.menuState===0?(t({type:1}),p.nextFrame(()=>{var R;return(R=s.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(m.preventDefault(),t({type:0})))}),x=c.useMemo(()=>({open:s.menuState===0}),[s]),h={ref:l,id:n,type:ue(e,s.buttonRef),"aria-haspopup":"menu","aria-controls":(o=s.itemsRef.current)==null?void 0:o.id,"aria-expanded":s.menuState===0,onKeyDown:v,onKeyUp:b,onClick:y};return k({ourProps:h,theirProps:u,slot:x,defaultTag:be,name:"Menu.Button"})}let Re="div",he=B.RenderStrategy|B.Static;function Me(e,i){var o,a;let n=O(),{id:u=`headlessui-menu-items-${n}`,...s}=e,[t,l]=F("Menu.Items"),p=$(t.itemsRef,i),v=le(t.itemsRef),b=z(),y=ie(),x=y!==null?(y&w.Open)===w.Open:t.menuState===0;c.useEffect(()=>{let r=t.itemsRef.current;r&&t.menuState===0&&r!==(v==null?void 0:v.activeElement)&&r.focus({preventScroll:!0})},[t.menuState,t.itemsRef,v]),oe({container:t.itemsRef.current,enabled:t.menuState===0,accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});let h=I(r=>{var S,D;switch(b.dispose(),r.key){case d.Space:if(t.searchQuery!=="")return r.preventDefault(),r.stopPropagation(),l({type:3,value:r.key});case d.Enter:if(r.preventDefault(),r.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:f}=t.items[t.activeItemIndex];(D=(S=f.current)==null?void 0:S.domRef.current)==null||D.click()}V(t.buttonRef.current);break;case d.ArrowDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Next});case d.ArrowUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Previous});case d.Home:case d.PageUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.First});case d.End:case d.PageDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Last});case d.Escape:r.preventDefault(),r.stopPropagation(),l({type:1}),N().nextFrame(()=>{var f;return(f=t.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})});break;case d.Tab:r.preventDefault(),r.stopPropagation(),l({type:1}),N().nextFrame(()=>{re(t.buttonRef.current,r.shiftKey?q.Previous:q.Next)});break;default:r.key.length===1&&(l({type:3,value:r.key}),b.setTimeout(()=>l({type:4}),350));break}}),m=I(r=>{switch(r.key){case d.Space:r.preventDefault();break}}),R=c.useMemo(()=>({open:t.menuState===0}),[t]),P={"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(a=t.buttonRef.current)==null?void 0:a.id,id:u,onKeyDown:h,onKeyUp:m,role:"menu",tabIndex:0,ref:p};return k({ourProps:P,theirProps:s,slot:R,defaultTag:Re,features:he,visible:x,name:"Menu.Items"})}let Se=c.Fragment;function Pe(e,i){let o=O(),{id:a=`headlessui-menu-item-${o}`,disabled:n=!1,...u}=e,[s,t]=F("Menu.Item"),l=s.activeItemIndex!==null?s.items[s.activeItemIndex].id===a:!1,p=c.useRef(null),v=$(i,p);A(()=>{if(s.__demoMode||s.menuState!==0||!l||s.activationTrigger===0)return;let f=N();return f.requestAnimationFrame(()=>{var C,L;(L=(C=p.current)==null?void 0:C.scrollIntoView)==null||L.call(C,{block:"nearest"})}),f.dispose},[s.__demoMode,p,l,s.menuState,s.activationTrigger,s.activeItemIndex]);let b=me(p),y=c.useRef({disabled:n,domRef:p,get textValue(){return b()}});A(()=>{y.current.disabled=n},[y,n]),A(()=>(t({type:5,id:a,dataRef:y}),()=>t({type:6,id:a})),[y,a]);let x=I(()=>{t({type:1})}),h=I(f=>{if(n)return f.preventDefault();t({type:1}),V(s.buttonRef.current)}),m=I(()=>{if(n)return t({type:2,focus:g.Nothing});t({type:2,focus:g.Specific,id:a})}),R=Z(),P=I(f=>R.update(f)),r=I(f=>{R.wasMoved(f)&&(n||l||t({type:2,focus:g.Specific,id:a,trigger:0}))}),S=I(f=>{R.wasMoved(f)&&(n||l&&t({type:2,focus:g.Nothing}))}),D=c.useMemo(()=>({active:l,disabled:n,close:x}),[l,n,x]);return k({ourProps:{id:a,ref:v,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:m,onPointerEnter:P,onMouseEnter:P,onPointerMove:r,onMouseMove:r,onPointerLeave:S,onMouseLeave:S},theirProps:u,slot:D,defaultTag:Se,name:"Menu.Item"})}let De=E(ge),Te=E(xe),we=E(Me),Ee=E(Pe),T=Object.assign(De,{Button:Te,Items:we,Item:Ee});const G=c.forwardRef(({buttonProps:e,className:i,items:o,menuClassName:a,menuSize:n,...u},s)=>M.jsxs(T,{as:"div",className:Q("relative",i),ref:s,...u,children:[M.jsx(T.Button,{as:H,...e}),M.jsx(ce,{as:c.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:M.jsx(T.Items,{as:J,size:n,className:Q("absolute z-50 bg-base-100 shadow-xl",a),children:o.map(({id:t,...l})=>M.jsx(T.Item,{as:c.Fragment,children:({active:p,disabled:v})=>M.jsx(W,{disabled:v,focus:p,...l})},t))})})]}));G.displayName="DropdownMenu";G.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu",props:{buttonProps:{required:!1,tsType:{name:"ButtonProps"},description:""},className:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"DropdownItemProps"}],raw:"DropdownItemProps[]"},description:""},menuClassName:{required:!1,tsType:{name:"string"},description:""},menuSize:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof MENU_SIZES)[number]"},description:""}},composes:["Omit"]};export{G as D};
