import{R as g,r as n}from"./index-DRjF_FHU.js";import{l as E}from"./lodash-CaEHFKMH.js";import{c as D}from"./FormLabelText-2tTELyhz.js";function b({children:t,freeze:s}){let r=y(s,t);return g.createElement(g.Fragment,null,r)}function y(t,s){let[r,a]=n.useState(s);return!t&&r!==s&&a(s),t?r:s}const h=(t,s)=>{const[r,a]=n.useState(t);n.useEffect(()=>{E.isEqual(r,t)||a(t)},[r,t]),n.useEffect(s,[r])},k=(t,s)=>t.id===s.id,q=t=>E.groupBy(t,({id:s})=>s),w=({multi:t,name:s,onItemSelect:r,options:a,selectedItems:i,setSelectedItems:f,valueMode:c})=>{const{watch:C,setValue:l}=D(),[V,m]=n.useState(!1),u=C(s),d={shouldTouch:!0,shouldDirty:!0},e=i[0]??null,p=n.useCallback(o=>o&&a[o]?[a[o][0]]:[],[a]);h(u,()=>{f(c==="id"?t===!0?(u??[]).flatMap(p):p(u??void 0):t===!0?u??[]:u?[u]:[]),m(!0)}),h(i,()=>{if(V){if(c==="id"){const o=t===!0?i.map(({id:x})=>x):(e==null?void 0:e.id)??"";l(s,o,d)}else l(s,t===!0?i:e,d);r==null||r(i)}})};export{k as d,b as f,q as g,y as l,w as u};
