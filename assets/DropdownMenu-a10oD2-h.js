import{j as C}from"./jsx-runtime-DiklIkkE.js";import{c as de}from"./index-lhGYx47h.js";import{r as f,R as w}from"./index-DRjF_FHU.js";import{B as ce}from"./Button-D0Yf2K26.js";import{a as pe,M as fe}from"./MenuItem-BBhh-GbJ.js";import{$ as ve,a as Ie}from"./useFocusRing-CeEfTI_f.js";import{r as N}from"./index-Bx0Ph3cE.js";import{w as ye,e as be}from"./use-resolve-button-type-BunvJ_cM.js";import{s as ge,a as Se}from"./use-text-value-BrtKXhrT.js";import{K as D,y as K,b as g,_ as W,L as T,p as Ee,n as O,o as xe,a as X,O as J,c as I}from"./keyboard-CkwPyo54.js";import{F as he,y as Pe,x as Me,R as $e,b as Re,d as we,M as De}from"./floating-DbckstqE.js";import{y as Te}from"./use-inert-others-xmMDja1V.js";import{n as _e,m as ke,f as Fe,r as Ae,R as Ce}from"./portal-klmoE2MD.js";import{u as Ne,c as y,f as B}from"./calculate-active-index-u79R9Ahj.js";import{u as Oe,x as je,i as j,R as Ke,c as qe}from"./open-closed-ZYQZnB1s.js";import{F as Le}from"./use-tree-walker-ClltwzGM.js";import{r as Qe}from"./bugs-DpEN4NTH.js";import{j as Be,F as Z,G as Y,_ as Ue,A as Ge,h as Ve}from"./focus-management-BpNHtozA.js";import{w as He}from"./description-BiWv9uhY.js";import{K as ee,P as ze}from"./label-BHy4_Co_.js";var Je=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Je||{}),Ze=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ze||{}),We=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(We||{});function U(e,r=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=Ue(r(e.items.slice()),l=>l.dataRef.current.domRef.current),a=o?n.indexOf(o):null;return a===-1&&(a=null),{items:n,activeItemIndex:a}}let Xe={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,r)=>{var o,n,a,l,i;if(e.menuState===1)return e;let m={...e,searchQuery:"",activationTrigger:(o=r.trigger)!=null?o:1,__demoMode:!1};if(r.focus===y.Nothing)return{...m,activeItemIndex:null};if(r.focus===y.Specific)return{...m,activeItemIndex:e.items.findIndex(c=>c.id===r.id)};if(r.focus===y.Previous){let c=e.activeItemIndex;if(c!==null){let b=e.items[c].dataRef.current.domRef,t=B(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(t!==null){let u=e.items[t].dataRef.current.domRef;if(((n=b.current)==null?void 0:n.previousElementSibling)===u.current||((a=u.current)==null?void 0:a.previousElementSibling)===null)return{...m,activeItemIndex:t}}}}else if(r.focus===y.Next){let c=e.activeItemIndex;if(c!==null){let b=e.items[c].dataRef.current.domRef,t=B(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(t!==null){let u=e.items[t].dataRef.current.domRef;if(((l=b.current)==null?void 0:l.nextElementSibling)===u.current||((i=u.current)==null?void 0:i.nextElementSibling)===null)return{...m,activeItemIndex:t}}}}let d=U(e),p=B(r,{resolveItems:()=>d.items,resolveActiveIndex:()=>d.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled});return{...m,...d,activeItemIndex:p}},3:(e,r)=>{let o=e.searchQuery!==""?0:1,n=e.searchQuery+r.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(i=>{var m;return((m=i.dataRef.current.textValue)==null?void 0:m.startsWith(n))&&!i.dataRef.current.disabled}),l=a?e.items.indexOf(a):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,r)=>{let o=U(e,n=>[...n,{id:r.id,dataRef:r.dataRef}]);return{...e,...o}},6:(e,r)=>{let o=U(e,n=>{let a=n.findIndex(l=>l.id===r.id);return a!==-1&&n.splice(a,1),n});return{...e,...o,activationTrigger:1}},7:(e,r)=>e.buttonElement===r.element?e:{...e,buttonElement:r.element},8:(e,r)=>e.itemsElement===r.element?e:{...e,itemsElement:r.element}},G=f.createContext(null);G.displayName="MenuContext";function q(e){let r=f.useContext(G);if(r===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,q),o}return r}function Ye(e,r){return X(r.type,Xe,e,r)}let et=f.Fragment;function tt(e,r){let{__demoMode:o=!1,...n}=e,a=f.useReducer(Ye,{__demoMode:o,menuState:o?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsElement:i,buttonElement:m},d]=a,p=K(r);Ce(l===0,[m,i],(h,E)=>{d({type:1}),Ge(E,Ve.Loose)||(h.preventDefault(),m==null||m.focus())});let c=g(()=>{d({type:1})}),b=f.useMemo(()=>({open:l===0,close:c}),[l,c]),t={ref:p},u=T();return w.createElement(De,null,w.createElement(G.Provider,{value:a},w.createElement(qe,{value:X(l,{0:j.Open,1:j.Closed})},u({ourProps:t,theirProps:n,slot:b,defaultTag:et,name:"Menu"}))))}let rt="button";function nt(e,r){var o;let n=f.useId(),{id:a=`headlessui-menu-button-${n}`,disabled:l=!1,autoFocus:i=!1,...m}=e,[d,p]=q("Menu.Button"),c=he(),b=K(r,Pe(),g(v=>p({type:7,element:v}))),t=g(v=>{switch(v.key){case I.Space:case I.Enter:case I.ArrowDown:v.preventDefault(),v.stopPropagation(),N.flushSync(()=>p({type:0})),p({type:2,focus:y.First});break;case I.ArrowUp:v.preventDefault(),v.stopPropagation(),N.flushSync(()=>p({type:0})),p({type:2,focus:y.Last});break}}),u=g(v=>{switch(v.key){case I.Space:v.preventDefault();break}}),h=g(v=>{var F;if(Qe(v.currentTarget))return v.preventDefault();l||(d.menuState===0?(N.flushSync(()=>p({type:1})),(F=d.buttonElement)==null||F.focus({preventScroll:!0})):(v.preventDefault(),p({type:0})))}),{isFocusVisible:E,focusProps:P}=ve({autoFocus:i}),{isHovered:M,hoverProps:_}=Ie({isDisabled:l}),{pressed:$,pressProps:x}=ye({disabled:l}),k=f.useMemo(()=>({open:d.menuState===0,active:$||d.menuState===0,disabled:l,hover:M,focus:E,autofocus:i}),[d,M,E,$,l,i]),R=W(c(),{ref:b,id:a,type:be(e,d.buttonElement),"aria-haspopup":"menu","aria-controls":(o=d.itemsElement)==null?void 0:o.id,"aria-expanded":d.menuState===0,disabled:l||void 0,autoFocus:i,onKeyDown:t,onKeyUp:u,onClick:h},P,_,x);return T()({ourProps:R,theirProps:m,slot:k,defaultTag:rt,name:"Menu.Button"})}let at="div",ot=J.RenderStrategy|J.Static;function st(e,r){var o,n;let a=f.useId(),{id:l=`headlessui-menu-items-${a}`,anchor:i,portal:m=!1,modal:d=!0,transition:p=!1,...c}=e,b=Me(i),[t,u]=q("Menu.Items"),[h,E]=$e(b),P=Re(),[M,_]=f.useState(null),$=K(r,b?h:null,g(s=>u({type:8,element:s})),_),x=_e(t.itemsElement);b&&(m=!0);let k=Oe(),[R,v]=je(p,M,k!==null?(k&j.Open)===j.Open:t.menuState===0);ke(R,t.buttonElement,()=>{u({type:1})});let F=t.__demoMode?!1:d&&t.menuState===0;Fe(F,x);let L=t.__demoMode?!1:d&&t.menuState===0;Te(L,{allowed:f.useCallback(()=>[t.buttonElement,t.itemsElement],[t.buttonElement,t.itemsElement])});let Q=t.menuState!==0,S=ge(Q,t.buttonElement)?!1:R;f.useEffect(()=>{let s=t.itemsElement;s&&t.menuState===0&&s!==(x==null?void 0:x.activeElement)&&s.focus({preventScroll:!0})},[t.menuState,t.itemsElement,x]),Le(t.menuState===0,{container:t.itemsElement,accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let A=Ee(),oe=g(s=>{var V,H,z;switch(A.dispose(),s.key){case I.Space:if(t.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),u({type:3,value:s.key});case I.Enter:if(s.preventDefault(),s.stopPropagation(),u({type:1}),t.activeItemIndex!==null){let{dataRef:me}=t.items[t.activeItemIndex];(H=(V=me.current)==null?void 0:V.domRef.current)==null||H.click()}Y(t.buttonElement);break;case I.ArrowDown:return s.preventDefault(),s.stopPropagation(),u({type:2,focus:y.Next});case I.ArrowUp:return s.preventDefault(),s.stopPropagation(),u({type:2,focus:y.Previous});case I.Home:case I.PageUp:return s.preventDefault(),s.stopPropagation(),u({type:2,focus:y.First});case I.End:case I.PageDown:return s.preventDefault(),s.stopPropagation(),u({type:2,focus:y.Last});case I.Escape:s.preventDefault(),s.stopPropagation(),N.flushSync(()=>u({type:1})),(z=t.buttonElement)==null||z.focus({preventScroll:!0});break;case I.Tab:s.preventDefault(),s.stopPropagation(),N.flushSync(()=>u({type:1})),Be(t.buttonElement,s.shiftKey?Z.Previous:Z.Next);break;default:s.key.length===1&&(u({type:3,value:s.key}),A.setTimeout(()=>u({type:4}),350));break}}),se=g(s=>{switch(s.key){case I.Space:s.preventDefault();break}}),le=f.useMemo(()=>({open:t.menuState===0}),[t.menuState]),ue=W(b?P():{},{"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(n=t.buttonElement)==null?void 0:n.id,id:l,onKeyDown:oe,onKeyUp:se,role:"menu",tabIndex:t.menuState===0?0:void 0,ref:$,style:{...c.style,...E,"--button-width":we(t.buttonElement,!0).width},...Ke(v)}),ie=T();return w.createElement(Ae,{enabled:m?e.static||R:!1},ie({ourProps:ue,theirProps:c,slot:le,defaultTag:at,features:ot,visible:S,name:"Menu.Items"}))}let lt=f.Fragment;function ut(e,r){let o=f.useId(),{id:n=`headlessui-menu-item-${o}`,disabled:a=!1,...l}=e,[i,m]=q("Menu.Item"),d=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===n:!1,p=f.useRef(null),c=K(r,p);O(()=>{if(!i.__demoMode&&i.menuState===0&&d&&i.activationTrigger!==0)return xe().requestAnimationFrame(()=>{var S,A;(A=(S=p.current)==null?void 0:S.scrollIntoView)==null||A.call(S,{block:"nearest"})})},[i.__demoMode,p,d,i.menuState,i.activationTrigger,i.activeItemIndex]);let b=Se(p),t=f.useRef({disabled:a,domRef:p,get textValue(){return b()}});O(()=>{t.current.disabled=a},[t,a]),O(()=>(m({type:5,id:n,dataRef:t}),()=>m({type:6,id:n})),[t,n]);let u=g(()=>{m({type:1})}),h=g(S=>{if(a)return S.preventDefault();m({type:1}),Y(i.buttonElement)}),E=g(()=>{if(a)return m({type:2,focus:y.Nothing});m({type:2,focus:y.Specific,id:n})}),P=Ne(),M=g(S=>{P.update(S),!a&&(d||m({type:2,focus:y.Specific,id:n,trigger:0}))}),_=g(S=>{P.wasMoved(S)&&(a||d||m({type:2,focus:y.Specific,id:n,trigger:0}))}),$=g(S=>{P.wasMoved(S)&&(a||d&&m({type:2,focus:y.Nothing}))}),[x,k]=ee(),[R,v]=He(),F=f.useMemo(()=>({active:d,focus:d,disabled:a,close:u}),[d,a,u]),L={id:n,ref:c,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":x,"aria-describedby":R,disabled:void 0,onClick:h,onFocus:E,onPointerEnter:M,onMouseEnter:M,onPointerMove:_,onMouseMove:_,onPointerLeave:$,onMouseLeave:$},Q=T();return w.createElement(k,null,w.createElement(v,null,Q({ourProps:L,theirProps:l,slot:F,defaultTag:lt,name:"Menu.Item"})))}let it="div";function mt(e,r){let[o,n]=ee(),a=e,l={ref:r,"aria-labelledby":o,role:"group"},i=T();return w.createElement(n,null,i({ourProps:l,theirProps:a,slot:{},defaultTag:it,name:"Menu.Section"}))}let dt="header";function ct(e,r){let o=f.useId(),{id:n=`headlessui-menu-heading-${o}`,...a}=e,l=ze();O(()=>l.register(n),[n,l.register]);let i={id:n,ref:r,role:"presentation",...l.props};return T()({ourProps:i,theirProps:a,slot:{},defaultTag:dt,name:"Menu.Heading"})}let pt="div";function ft(e,r){let o=e,n={ref:r,role:"separator"};return T()({ourProps:n,theirProps:o,slot:{},defaultTag:pt,name:"Menu.Separator"})}let vt=D(tt),te=D(nt),re=D(st),ne=D(ut),It=D(mt),yt=D(ct),bt=D(ft),gt=Object.assign(vt,{Button:te,Items:re,Item:ne,Section:It,Heading:yt,Separator:bt});const ae=f.forwardRef(({anchor:e,buttonProps:r,className:o,items:n,menuClassName:a,menuSize:l,portal:i},m)=>C.jsxs(gt,{as:"div",className:o,ref:m,children:[C.jsx(te,{as:ce,...r}),C.jsx(re,{anchor:e,as:pe,portal:i,size:l,transition:!0,className:de("origin-top rounded-box p-2 shadow-lg transition duration-200 ease-out data-[closed]:scale-95 data-[closed]:opacity-0",a),children:n.map(({id:d,...p})=>C.jsx(ne,{as:f.Fragment,children:({disabled:c})=>C.jsx(fe,{disabled:c,...p})},d))})]}));ae.displayName="DropdownMenu";ae.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu",props:{anchor:{required:!1,tsType:{name:"AnchorProps"},description:""},buttonProps:{required:!1,tsType:{name:"ButtonProps"},description:""},className:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"DropdownItemProps"}],raw:"DropdownItemProps[]"},description:""},menuClassName:{required:!1,tsType:{name:"string"},description:""},menuSize:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof MENU_SIZES)[number]"},description:""},portal:{required:!1,tsType:{name:"boolean"},description:""}}};export{ae as D};
