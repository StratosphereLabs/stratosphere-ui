import{j as C}from"./jsx-runtime-DR9Q75dM.js";import{c as Z}from"./index-lhGYx47h.js";import{r as f,R as w}from"./index-DRjF_FHU.js";import{B as me}from"./Button-C8Er2sLW.js";import{a as de,M as ce}from"./MenuItem-Cd_vHKCC.js";import{$ as pe,a as fe}from"./useFocusRing-Bmn-zFZf.js";import{r as N}from"./index-rX-Bn4lm.js";import{w as ve,e as Ie}from"./use-resolve-button-type-CNcqzI1Z.js";import{s as ye,a as be}from"./use-text-value-DAbb_MZc.js";import{O as W,K as D,y as L,o as g,L as T,u as Y,_ as ee,p as ge,n as j,b as Se,c as I}from"./keyboard-CUk6zo9K.js";import{M as xe,F as Ee,y as he,x as Me,R as Pe,b as $e,d as Re}from"./floating-DlhN9gcG.js";import{y as we}from"./use-inert-others-zdk8ktqN.js";import{R as De,n as Te,m as Fe,f as _e,r as ke}from"./portal-ddnK3kf1.js";import{u as Ce,c as y,f as U}from"./calculate-active-index-u79R9Ahj.js";import{c as Ae,i as K,u as Ne,x as Oe,R as je}from"./use-server-handoff-complete-BT_ig_8b.js";import{F as Ke}from"./use-tree-walker-B21Ow2Em.js";import{r as Le}from"./bugs-DpEN4NTH.js";import{A as Qe,h as Be,j as qe,F as X,G as te,_ as Ue}from"./focus-management-BR9cTPnt.js";import{w as ze}from"./description-DnSH_hHI.js";import{K as re,P as Ge}from"./label-DKwZbPqi.js";import{z as Ve}from"./transition-DrHXcrLQ.js";var He=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(He||{}),Je=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Je||{}),Ze=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(Ze||{});function z(e,r=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=Ue(r(e.items.slice()),l=>l.dataRef.current.domRef.current),a=o?n.indexOf(o):null;return a===-1&&(a=null),{items:n,activeItemIndex:a}}let We={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,r)=>{var o,n,a,l,u;if(e.menuState===1)return e;let m={...e,searchQuery:"",activationTrigger:(o=r.trigger)!=null?o:1,__demoMode:!1};if(r.focus===y.Nothing)return{...m,activeItemIndex:null};if(r.focus===y.Specific)return{...m,activeItemIndex:e.items.findIndex(c=>c.id===r.id)};if(r.focus===y.Previous){let c=e.activeItemIndex;if(c!==null){let b=e.items[c].dataRef.current.domRef,t=U(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(t!==null){let i=e.items[t].dataRef.current.domRef;if(((n=b.current)==null?void 0:n.previousElementSibling)===i.current||((a=i.current)==null?void 0:a.previousElementSibling)===null)return{...m,activeItemIndex:t}}}}else if(r.focus===y.Next){let c=e.activeItemIndex;if(c!==null){let b=e.items[c].dataRef.current.domRef,t=U(r,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(t!==null){let i=e.items[t].dataRef.current.domRef;if(((l=b.current)==null?void 0:l.nextElementSibling)===i.current||((u=i.current)==null?void 0:u.nextElementSibling)===null)return{...m,activeItemIndex:t}}}}let d=z(e),p=U(r,{resolveItems:()=>d.items,resolveActiveIndex:()=>d.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled});return{...m,...d,activeItemIndex:p}},3:(e,r)=>{let o=e.searchQuery!==""?0:1,n=e.searchQuery+r.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(u=>{var m;return((m=u.dataRef.current.textValue)==null?void 0:m.startsWith(n))&&!u.dataRef.current.disabled}),l=a?e.items.indexOf(a):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,r)=>{let o=z(e,n=>[...n,{id:r.id,dataRef:r.dataRef}]);return{...e,...o}},6:(e,r)=>{let o=z(e,n=>{let a=n.findIndex(l=>l.id===r.id);return a!==-1&&n.splice(a,1),n});return{...e,...o,activationTrigger:1}},7:(e,r)=>e.buttonElement===r.element?e:{...e,buttonElement:r.element},8:(e,r)=>e.itemsElement===r.element?e:{...e,itemsElement:r.element}},G=f.createContext(null);G.displayName="MenuContext";function Q(e){let r=f.useContext(G);if(r===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Q),o}return r}function Xe(e,r){return Y(r.type,We,e,r)}let Ye=f.Fragment;function et(e,r){let{__demoMode:o=!1,...n}=e,a=f.useReducer(Xe,{__demoMode:o,menuState:o?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsElement:u,buttonElement:m},d]=a,p=L(r);De(l===0,[m,u],(h,x)=>{d({type:1}),Qe(x,Be.Loose)||(h.preventDefault(),m==null||m.focus())});let c=g(()=>{d({type:1})}),b=f.useMemo(()=>({open:l===0,close:c}),[l,c]),t={ref:p},i=T();return w.createElement(xe,null,w.createElement(G.Provider,{value:a},w.createElement(Ae,{value:Y(l,{0:K.Open,1:K.Closed})},i({ourProps:t,theirProps:n,slot:b,defaultTag:Ye,name:"Menu"}))))}let tt="button";function rt(e,r){var o;let n=f.useId(),{id:a=`headlessui-menu-button-${n}`,disabled:l=!1,autoFocus:u=!1,...m}=e,[d,p]=Q("Menu.Button"),c=Ee(),b=L(r,he(),g(v=>p({type:7,element:v}))),t=g(v=>{switch(v.key){case I.Space:case I.Enter:case I.ArrowDown:v.preventDefault(),v.stopPropagation(),N.flushSync(()=>p({type:0})),p({type:2,focus:y.First});break;case I.ArrowUp:v.preventDefault(),v.stopPropagation(),N.flushSync(()=>p({type:0})),p({type:2,focus:y.Last});break}}),i=g(v=>{switch(v.key){case I.Space:v.preventDefault();break}}),h=g(v=>{var k;if(Le(v.currentTarget))return v.preventDefault();l||(d.menuState===0?(N.flushSync(()=>p({type:1})),(k=d.buttonElement)==null||k.focus({preventScroll:!0})):(v.preventDefault(),p({type:0})))}),{isFocusVisible:x,focusProps:M}=pe({autoFocus:u}),{isHovered:P,hoverProps:F}=fe({isDisabled:l}),{pressed:$,pressProps:E}=ve({disabled:l}),_=f.useMemo(()=>({open:d.menuState===0,active:$||d.menuState===0,disabled:l,hover:P,focus:x,autofocus:u}),[d,P,x,$,l,u]),R=ee(c(),{ref:b,id:a,type:Ie(e,d.buttonElement),"aria-haspopup":"menu","aria-controls":(o=d.itemsElement)==null?void 0:o.id,"aria-expanded":d.menuState===0,disabled:l||void 0,autoFocus:u,onKeyDown:t,onKeyUp:i,onClick:h},M,F,E);return T()({ourProps:R,theirProps:m,slot:_,defaultTag:tt,name:"Menu.Button"})}let nt="div",at=W.RenderStrategy|W.Static;function ot(e,r){var o,n;let a=f.useId(),{id:l=`headlessui-menu-items-${a}`,anchor:u,portal:m=!1,modal:d=!0,transition:p=!1,...c}=e,b=Me(u),[t,i]=Q("Menu.Items"),[h,x]=Pe(b),M=$e(),[P,F]=f.useState(null),$=L(r,b?h:null,g(s=>i({type:8,element:s})),F),E=Te(t.itemsElement);b&&(m=!0);let _=Ne(),[R,v]=Oe(p,P,_!==null?(_&K.Open)===K.Open:t.menuState===0);Fe(R,t.buttonElement,()=>{i({type:1})});let k=t.__demoMode?!1:d&&t.menuState===0;_e(k,E);let B=t.__demoMode?!1:d&&t.menuState===0;we(B,{allowed:f.useCallback(()=>[t.buttonElement,t.itemsElement],[t.buttonElement,t.itemsElement])});let q=t.menuState!==0,S=ye(q,t.buttonElement)?!1:R;f.useEffect(()=>{let s=t.itemsElement;s&&t.menuState===0&&s!==(E==null?void 0:E.activeElement)&&s.focus({preventScroll:!0})},[t.menuState,t.itemsElement,E]),Ke(t.menuState===0,{container:t.itemsElement,accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let A=ge(),ae=g(s=>{var V,H,J;switch(A.dispose(),s.key){case I.Space:if(t.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),i({type:3,value:s.key});case I.Enter:if(s.preventDefault(),s.stopPropagation(),i({type:1}),t.activeItemIndex!==null){let{dataRef:ue}=t.items[t.activeItemIndex];(H=(V=ue.current)==null?void 0:V.domRef.current)==null||H.click()}te(t.buttonElement);break;case I.ArrowDown:return s.preventDefault(),s.stopPropagation(),i({type:2,focus:y.Next});case I.ArrowUp:return s.preventDefault(),s.stopPropagation(),i({type:2,focus:y.Previous});case I.Home:case I.PageUp:return s.preventDefault(),s.stopPropagation(),i({type:2,focus:y.First});case I.End:case I.PageDown:return s.preventDefault(),s.stopPropagation(),i({type:2,focus:y.Last});case I.Escape:s.preventDefault(),s.stopPropagation(),N.flushSync(()=>i({type:1})),(J=t.buttonElement)==null||J.focus({preventScroll:!0});break;case I.Tab:s.preventDefault(),s.stopPropagation(),N.flushSync(()=>i({type:1})),qe(t.buttonElement,s.shiftKey?X.Previous:X.Next);break;default:s.key.length===1&&(i({type:3,value:s.key}),A.setTimeout(()=>i({type:4}),350));break}}),oe=g(s=>{switch(s.key){case I.Space:s.preventDefault();break}}),se=f.useMemo(()=>({open:t.menuState===0}),[t.menuState]),le=ee(b?M():{},{"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(n=t.buttonElement)==null?void 0:n.id,id:l,onKeyDown:ae,onKeyUp:oe,role:"menu",tabIndex:t.menuState===0?0:void 0,ref:$,style:{...c.style,...x,"--button-width":Re(t.buttonElement,!0).width},...je(v)}),ie=T();return w.createElement(ke,{enabled:m?e.static||R:!1},ie({ourProps:le,theirProps:c,slot:se,defaultTag:nt,features:at,visible:S,name:"Menu.Items"}))}let st=f.Fragment;function lt(e,r){let o=f.useId(),{id:n=`headlessui-menu-item-${o}`,disabled:a=!1,...l}=e,[u,m]=Q("Menu.Item"),d=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===n:!1,p=f.useRef(null),c=L(r,p);j(()=>{if(!u.__demoMode&&u.menuState===0&&d&&u.activationTrigger!==0)return Se().requestAnimationFrame(()=>{var S,A;(A=(S=p.current)==null?void 0:S.scrollIntoView)==null||A.call(S,{block:"nearest"})})},[u.__demoMode,p,d,u.menuState,u.activationTrigger,u.activeItemIndex]);let b=be(p),t=f.useRef({disabled:a,domRef:p,get textValue(){return b()}});j(()=>{t.current.disabled=a},[t,a]),j(()=>(m({type:5,id:n,dataRef:t}),()=>m({type:6,id:n})),[t,n]);let i=g(()=>{m({type:1})}),h=g(S=>{if(a)return S.preventDefault();m({type:1}),te(u.buttonElement)}),x=g(()=>{if(a)return m({type:2,focus:y.Nothing});m({type:2,focus:y.Specific,id:n})}),M=Ce(),P=g(S=>{M.update(S),!a&&(d||m({type:2,focus:y.Specific,id:n,trigger:0}))}),F=g(S=>{M.wasMoved(S)&&(a||d||m({type:2,focus:y.Specific,id:n,trigger:0}))}),$=g(S=>{M.wasMoved(S)&&(a||d&&m({type:2,focus:y.Nothing}))}),[E,_]=re(),[R,v]=ze(),k=f.useMemo(()=>({active:d,focus:d,disabled:a,close:i}),[d,a,i]),B={id:n,ref:c,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":E,"aria-describedby":R,disabled:void 0,onClick:h,onFocus:x,onPointerEnter:P,onMouseEnter:P,onPointerMove:F,onMouseMove:F,onPointerLeave:$,onMouseLeave:$},q=T();return w.createElement(_,null,w.createElement(v,null,q({ourProps:B,theirProps:l,slot:k,defaultTag:st,name:"Menu.Item"})))}let it="div";function ut(e,r){let[o,n]=re(),a=e,l={ref:r,"aria-labelledby":o,role:"group"},u=T();return w.createElement(n,null,u({ourProps:l,theirProps:a,slot:{},defaultTag:it,name:"Menu.Section"}))}let mt="header";function dt(e,r){let o=f.useId(),{id:n=`headlessui-menu-heading-${o}`,...a}=e,l=Ge();j(()=>l.register(n),[n,l.register]);let u={id:n,ref:r,role:"presentation",...l.props};return T()({ourProps:u,theirProps:a,slot:{},defaultTag:mt,name:"Menu.Heading"})}let ct="div";function pt(e,r){let o=e,n={ref:r,role:"separator"};return T()({ourProps:n,theirProps:o,slot:{},defaultTag:ct,name:"Menu.Separator"})}let ft=D(et),vt=D(rt),It=D(ot),yt=D(lt),bt=D(ut),gt=D(dt),St=D(pt),O=Object.assign(ft,{Button:vt,Items:It,Item:yt,Section:bt,Heading:gt,Separator:St});const ne=f.forwardRef(({buttonProps:e,className:r,items:o,menuClassName:n,menuSize:a,...l},u)=>C.jsxs(O,{as:"div",className:Z("relative",r),ref:u,...l,children:[C.jsx(O.Button,{as:me,...e}),C.jsx(Ve,{as:f.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:C.jsx(O.Items,{as:de,size:a,className:Z("absolute z-50 bg-base-100 shadow-xl",n),children:o.map(({id:m,...d})=>C.jsx(O.Item,{as:f.Fragment,children:({active:p,disabled:c})=>C.jsx(ce,{disabled:c,focus:p,...d})},m))})})]}));ne.displayName="DropdownMenu";ne.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu",props:{buttonProps:{required:!1,tsType:{name:"ButtonProps"},description:""},className:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"DropdownItemProps"}],raw:"DropdownItemProps[]"},description:""},menuClassName:{required:!1,tsType:{name:"string"},description:""},menuSize:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof MENU_SIZES)[number]"},description:""}},composes:["Omit"]};export{ne as D};
