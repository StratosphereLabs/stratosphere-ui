import{j as I}from"./jsx-runtime-DiklIkkE.js";import{c as de}from"./index-lhGYx47h.js";import{c as q,r as B}from"./index-DRjF_FHU.js";import{c as me,b as ce}from"./FormLabelText-BYRBbg7S.js";var Y={},fe=q&&q.__createBinding||(Object.create?function(e,h,f,b){b===void 0&&(b=f),Object.defineProperty(e,b,{enumerable:!0,get:function(){return h[f]}})}:function(e,h,f,b){b===void 0&&(b=f),e[b]=h[f]}),he=q&&q.__setModuleDefault||(Object.create?function(e,h){Object.defineProperty(e,"default",{enumerable:!0,value:h})}:function(e,h){e.default=h}),be=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var h={};if(e!=null)for(var f in e)f!=="default"&&Object.prototype.hasOwnProperty.call(e,f)&&fe(h,e,f);return he(h,e),h};Object.defineProperty(Y,"__esModule",{value:!0});const i=be(B);let W=null,A=null;const ge=(e,h)=>{let f=e.ruler===void 0||e.ruler===null?!0:e.ruler,b=e.label===void 0||e.label===null?!0:e.label,k=e.subSteps===void 0||e.subSteps===null?!1:e.subSteps,X=e.stepOnly===void 0||e.stepOnly===null?!1:e.stepOnly,L=e.preventWheel===void 0||e.preventWheel===null?!1:e.preventWheel,M=(0,i.useRef)(null),a=+(e.min||0),l=+(e.max||100),d=Math.abs(+(e.step||5)),p=0,g=!!e.disabled,u=e.canMinMaxValueSame?0:d,j=Math.floor((+l-+a)/+d),N=e.labels||[];N.length===0?(N=[],N.push(a.toString()),N.push(l.toString())):j=N.length-1,typeof b=="string"&&(b=b==="true"),typeof f=="string"&&(f=f==="true"),typeof L=="string"&&(L=L==="true"),d.toString().includes(".")&&(p=2);let v=e.minValue;v==null&&(v=25),v=+v;let y=e.maxValue;y==null&&(y=75),y=+y,v<a&&(v=a),v>l&&(v=l),y<v&&(y=+v+ +d),y>l&&(y=l),y<a&&(y=a);const[s,C]=(0,i.useState)(+v),[o,E]=(0,i.useState)(+y),[K,O]=(0,i.useState)((s-a)/(l-a)*100),[F,H]=(0,i.useState)((l-o)/(l-a)*100),[J,Q]=(0,i.useState)(""),[U,Z]=(0,i.useState)(""),[G,x]=(0,i.useState)(!0),$=n=>{if(g)return;let t=s-d;t<a&&(t=a),C(t)},ee=n=>{if(g)return;let t=parseFloat(n.target.value);t>o-u&&(t=o-u),C(t),x(!0)},te=n=>{if(g)return;let t=n.clientX,w=n.target.parentNode.getBoundingClientRect(),R=s;x(!1);let T=V=>{let S=(V.clientX-t)/w.width,r=R+(l-a)*S;X&&(r=Math.round(r/d)*d),r=parseFloat(r.toFixed(p)),r<a?r=a:r>o-u&&(r=o-u),C(r)},_=V=>{x(!0),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",_)},ne=n=>{if(g)return;let t=n.touches[0].clientX,w=n.target.parentNode.getBoundingClientRect(),R=s;x(!1);let T=V=>{let S=(V.touches[0].clientX-t)/w.width,r=R+(l-a)*S;X&&(r=Math.round(r/d)*d),r=parseFloat(r.toFixed(p)),r<a?r=a:r>o-u&&(r=o-u),C(r)},_=V=>{x(!0),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",_)};document.addEventListener("touchmove",T),document.addEventListener("touchend",_)},ae=n=>{if(g)return;let t=s+d;t>o-u&&(t=o-u),C(t)},le=n=>{if(g)return;let t=o-d;t<s+u&&(t=s+u),E(t)},re=n=>{if(g)return;let t=parseFloat(n.target.value);t<s+u&&(t=s+u),E(t),x(!0)},ie=n=>{if(g)return;let t=n.clientX,w=n.target.parentNode.getBoundingClientRect(),R=o;x(!1);let T=V=>{let S=(V.clientX-t)/w.width,r=R+(l-a)*S;X&&(r=Math.round(r/d)*d),r=parseFloat(r.toFixed(p)),r<s+u?r=s+u:r>l&&(r=l),E(r)},_=V=>{x(!0),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",_)},ue=n=>{if(g)return;let t=n.touches[0].clientX,w=n.target.parentNode.getBoundingClientRect(),R=o;x(!1);let T=V=>{let S=(V.touches[0].clientX-t)/w.width,r=R+(l-a)*S;X&&(r=Math.round(r/d)*d),r=parseFloat(r.toFixed(p)),r<s+u?r=s+u:r>l&&(r=l),E(r)},_=V=>{x(!0),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",_)};document.addEventListener("touchmove",T),document.addEventListener("touchend",_)},se=n=>{if(g)return;let t=o+d;t>l&&(t=l),E(t)},oe=n=>{if(g||L===!0||!n.shiftKey&&!n.ctrlKey)return;let t=(l-a)/100;t>1&&(t=1),n.deltaY<0&&(t=-t);let m=s,c=o;n.shiftKey&&n.ctrlKey?m+t>=a&&c+t<=l&&(m=m+t,c=c+t):n.ctrlKey?(t=c+t,t<m+u?t=m+u:t>l&&(t=l),c=t):n.shiftKey&&(t=m+t,t<a?t=a:t>c-u&&(t=c-u),m=t),x(!1),E(c),C(m),W&&window.clearTimeout(W),W=window.setTimeout(()=>{x(!0)},100)};return(0,i.useEffect)(()=>{M&&M.current&&M.current.parentNode.addEventListener("wheel",m=>{!m.shiftKey&&!m.ctrlKey||m.preventDefault()})},[M]),(0,i.useEffect)(()=>{if(o<s)throw new Error("maxValue is less than minValue");const n=()=>{let c={min:a,max:l,minValue:s,maxValue:o};G&&e.onChange&&e.onChange(c),e.onInput&&e.onInput(c)};Q(e.minCaption||s.toFixed(p)),Z(e.maxCaption||o.toFixed(p));let t=(s-a)/(l-a)*100;O(t);let m=(l-o)/(l-a)*100;H(m),A&&window.clearTimeout(A),A=window.setTimeout(n,20)},[s,o,a,l,p,e,G]),(0,i.useEffect)(()=>{let n=e.minValue;n==null&&(n=25),n=+n,n<a&&(n=a),n>l&&(n=l),x(!1),C(+n)},[e.minValue,a,l]),(0,i.useEffect)(()=>{let n=e.maxValue;n==null&&(n=75),n=+n,n>l&&(n=l),n<a&&(n=a),x(!1),E(+n)},[e.maxValue,a,l,d]),i.default.createElement("div",{ref:h,id:e.id,className:(e.baseClassName||"multi-range-slider")+" "+(e.className||"")+(g?" disabled":""),style:e.style,onWheel:oe},i.default.createElement("div",{className:"bar",ref:M},i.default.createElement("div",{className:"bar-left",style:{width:K+"%",backgroundColor:e.barLeftColor},onClick:$}),i.default.createElement("input",{placeholder:"min-value",className:"input-type-range input-type-range-min",type:"range",min:a,max:l,step:d,value:s,onInput:ee}),i.default.createElement("div",{className:"thumb thumb-left",style:{backgroundColor:e.thumbLeftColor},onMouseDown:te,onTouchStart:ne},i.default.createElement("div",{className:"caption"},i.default.createElement("span",{className:"min-caption"},J))),i.default.createElement("div",{className:"bar-inner",style:{backgroundColor:e.barInnerColor}},i.default.createElement("div",{className:"bar-inner-left",onClick:ae}),i.default.createElement("div",{className:"bar-inner-right",onClick:le})),i.default.createElement("input",{placeholder:"max-value",className:"input-type-range input-type-range-max",type:"range",min:a,max:l,step:d,value:o,onInput:re}),i.default.createElement("div",{className:"thumb thumb-right",style:{backgroundColor:e.thumbRightColor},onMouseDown:ie,onTouchStart:ue},i.default.createElement("div",{className:"caption"},i.default.createElement("span",{className:"max-caption"},U))),i.default.createElement("div",{className:"bar-right",style:{width:F+"%",backgroundColor:e.barRightColor},onClick:se})),f&&i.default.createElement("div",{className:"ruler"},[...Array(j)].map((n,t)=>i.default.createElement("div",{key:t,className:"ruler-rule"},k&&[...Array(10)].map((m,c)=>i.default.createElement("div",{key:c,className:"ruler-sub-rule"}))))),b&&i.default.createElement("div",{className:"labels"},N.map(n=>i.default.createElement("div",{key:n.toString(),className:"label"},n))))};var ve=Y.default=i.default.memo((0,i.forwardRef)(ge));const z=B.forwardRef(({barColor:e,barInnerColor:h,children:f,className:b,defaultMinValue:k,defaultMaxValue:X,labelText:L,min:M,max:a,name:l,onChange:d,onInput:p,ruler:g,showLabels:u,step:j,stepOnly:N,thumbLeftColor:v,thumbRightColor:y},s)=>{const[C,o]=B.useState(k??M),[E,K]=B.useState(X??a),{setValue:O}=me();return B.useEffect(()=>{O(l,[C,E],{shouldDirty:!0})},[C,E,l,O]),I.jsxs("fieldset",{className:de("fieldset py-0",b),children:[I.jsxs("div",{className:"flex justify-between",children:[L!==void 0?I.jsx(ce,{children:L}):null,f]}),I.jsx(ve,{ref:s,label:u,barInnerColor:h,barLeftColor:e,barRightColor:e,thumbLeftColor:v,thumbRightColor:y,min:M,max:a,ruler:g,step:j,stepOnly:N,minValue:C,maxValue:E,onChange:d,onInput:F=>{o(F.minValue),K(F.maxValue),p==null||p(F)}})]})});z.displayName="FormRangeSlider";z.__docgenInfo={description:"",methods:[],displayName:"FormRangeSlider",props:{barColor:{required:!1,tsType:{name:"string"},description:""},barInnerColor:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},defaultMinValue:{required:!1,tsType:{name:"number"},description:""},defaultMaxValue:{required:!1,tsType:{name:"number"},description:""},labelText:{required:!1,tsType:{name:"string"},description:""},min:{required:!0,tsType:{name:"number"},description:""},max:{required:!0,tsType:{name:"number"},description:""},name:{required:!0,tsType:{name:"Path",elements:[{name:"Values"}],raw:"Path<Values>"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: ChangeResult) => void",signature:{arguments:[{type:{name:"ChangeResult"},name:"e"}],return:{name:"void"}}},description:""},onInput:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: ChangeResult) => void",signature:{arguments:[{type:{name:"ChangeResult"},name:"e"}],return:{name:"void"}}},description:""},ruler:{required:!1,tsType:{name:"boolean"},description:""},showLabels:{required:!1,tsType:{name:"boolean"},description:""},step:{required:!1,tsType:{name:"number"},description:""},stepOnly:{required:!1,tsType:{name:"boolean"},description:""},thumbLeftColor:{required:!1,tsType:{name:"string"},description:""},thumbRightColor:{required:!1,tsType:{name:"string"},description:""}}};export{z as F};
